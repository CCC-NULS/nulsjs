<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Transaction package | NULS SDK</title>
    <meta name="description" content="Interact with the NULS Blockchain in JavaScript">
    
    
    <link rel="preload" href="/nulsjs/assets/css/0.styles.02525ab0.css" as="style"><link rel="preload" href="/nulsjs/assets/js/app.a69bc0ff.js" as="script"><link rel="preload" href="/nulsjs/assets/js/2.ad99787b.js" as="script"><link rel="preload" href="/nulsjs/assets/js/9.f34e919f.js" as="script"><link rel="prefetch" href="/nulsjs/assets/js/10.45eb6cfb.js"><link rel="prefetch" href="/nulsjs/assets/js/11.e7f7b31b.js"><link rel="prefetch" href="/nulsjs/assets/js/12.c4b65715.js"><link rel="prefetch" href="/nulsjs/assets/js/13.2ab56cc1.js"><link rel="prefetch" href="/nulsjs/assets/js/14.610fa14c.js"><link rel="prefetch" href="/nulsjs/assets/js/15.bce5e87a.js"><link rel="prefetch" href="/nulsjs/assets/js/3.0e414cba.js"><link rel="prefetch" href="/nulsjs/assets/js/4.f7de82a7.js"><link rel="prefetch" href="/nulsjs/assets/js/5.4e31a545.js"><link rel="prefetch" href="/nulsjs/assets/js/6.d9676ec6.js"><link rel="prefetch" href="/nulsjs/assets/js/7.d0de8275.js"><link rel="prefetch" href="/nulsjs/assets/js/8.b511ce82.js">
    <link rel="stylesheet" href="/nulsjs/assets/css/0.styles.02525ab0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/nulsjs/" class="home-link router-link-active"><img src="/nulsjs/logo.png" alt="NULS SDK" class="logo"> <span class="site-name can-hide">NULS SDK</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/nulsjs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/nulsjs/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="https://CCC-NULS.github.io/nuls-js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.x
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/CCC-NULS/nulsjs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/nulsjs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/nulsjs/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="https://CCC-NULS.github.io/nuls-js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.x
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/CCC-NULS/nulsjs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/nulsjs/guide/" class="sidebar-link">Getting Started</a></li><li><a href="/nulsjs/guide/core/" class="sidebar-link">Core</a></li><li><a href="/nulsjs/guide/account/" class="sidebar-link">Account</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Transaction</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/nulsjs/guide/transaction/" class="active sidebar-link">Basic concepts</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nulsjs/guide/transaction/#transaction-basic-concepts" class="sidebar-link">Transaction basic concepts</a></li><li class="sidebar-sub-header"><a href="/nulsjs/guide/transaction/#transaction-example" class="sidebar-link">Transaction example</a></li><li class="sidebar-sub-header"><a href="/nulsjs/guide/transaction/#destination-address" class="sidebar-link">Destination address</a></li><li class="sidebar-sub-header"><a href="/nulsjs/guide/transaction/#nuls-and-na-s" class="sidebar-link">NULS and NA's</a></li><li class="sidebar-sub-header"><a href="/nulsjs/guide/transaction/#transaction-remark" class="sidebar-link">Transaction remark</a></li><li class="sidebar-sub-header"><a href="/nulsjs/guide/transaction/#transaction-fee" class="sidebar-link">Transaction fee</a></li><li class="sidebar-sub-header"><a href="/nulsjs/guide/transaction/#sign-a-transaction" class="sidebar-link">Sign a transaction</a></li><li class="sidebar-sub-header"><a href="/nulsjs/guide/transaction/#broadcast-a-transaction" class="sidebar-link">Broadcast a transaction</a></li><li class="sidebar-sub-header"><a href="/nulsjs/guide/transaction/#serialize-a-transaction" class="sidebar-link">Serialize a transaction</a></li></ul></li><li><a href="/nulsjs/guide/transaction/api.html" class="sidebar-link">Transaction API</a></li><li><a href="/nulsjs/guide/transaction/transfer.html" class="sidebar-link">Transfer transaction</a></li><li><a href="/nulsjs/guide/transaction/alias.html" class="sidebar-link">Alias transaction</a></li><li><a href="/nulsjs/guide/transaction/deposit.html" class="sidebar-link">Deposit transaction</a></li><li><a href="/nulsjs/guide/transaction/cancelDeposit.html" class="sidebar-link">Cancel Deposit transaction</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="transaction-package"><a href="#transaction-package" class="header-anchor">#</a> Transaction package</h1> <p>This package provides all the necessary to send transactions to the NULS blockchain and obtain information from it</p> <h2 id="transaction-basic-concepts"><a href="#transaction-basic-concepts" class="header-anchor">#</a> Transaction basic concepts</h2> <p><strong>NULS SDK</strong> provides a very simple API for creating transactions. We expect this API to be accessible for developers without knowing the working internals of nuls in deep detail. What follows is a small introduction to transactions with some basic knowledge required to use this API.</p> <p>Each transaction may contain a set of inputs and outputs. Each input must declare a reference to the latest previous transaction made by the same account. This reference is called a <code>nonce</code> and it is indentified by the latest <code>16</code> digits of the latest <em>transaction hash</em>.</p> <p>So, in order to send a valid transaction, you must know the <code>nonce</code> of the latest transaction made by the same account. Fortunately, the SDK will handle it internally for you.</p> <p>Unlike other blockchain platforms, NULS has been designed to support different kinds of transactions, that we will cover along this guide.
Let's take a look at the simplier transaction we can make.</p> <h2 id="transaction-example"><a href="#transaction-example" class="header-anchor">#</a> Transaction example</h2> <p>We are going to send <code>1 NULS</code> from the accoutn identified by <code>fromAddress</code>, to the account identified by <code>toAddress</code>. To achieve this we need to provide the <code>privateKey</code> of the <code>fromAddress</code> account.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>nulsToNa<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nuls.io/core'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>TransferTransaction<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nuls.io/transaction'</span>

<span class="token keyword">const</span> fromAddress <span class="token operator">=</span> <span class="token string">'NULSd6HgaHd7xnnHFkAh8VEAdDu4PyWFyRvw2'</span>
<span class="token keyword">const</span> privateKey <span class="token operator">=</span> <span class="token string">'35daf771d7591e0a3021031efd561e97e2049bfe0ed7dd1a585330c721077d2b'</span>
<span class="token keyword">const</span> toAddress <span class="token operator">=</span> <span class="token string">'NULSd6HggwmkquJfskMhZ9iwJg4B724kvWiR4'</span>

<span class="token keyword">new</span> <span class="token class-name">TransferTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>fromAddress<span class="token punctuation">)</span>          <span class="token comment">// The transaction will be composed with inputs calculated from this account</span>
  <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>toAddress<span class="token punctuation">,</span> <span class="token function">nulsToNa</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// This will send 1 NULS to the account identified by it public address &quot;toAddress&quot;</span>
  <span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>privateKey<span class="token punctuation">)</span>           <span class="token comment">// We have to provide the private key of the account that owns the inputs </span>
  <span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                     <span class="token comment">// The transaction will be sent to the NULS network and added to the pending transaction pool</span>
</code></pre></div><h2 id="destination-address"><a href="#destination-address" class="header-anchor">#</a> Destination address</h2> <p>To specify the accounts which will receive the transfered amount we have to use the method <code>.to(address: string, amount: number)</code>. This is translated internally as a transaction output. We also can transfer NULS to different accounts at once, to achieve that we can add as much outputs as we need:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>nulsToNa<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nuls.io/core'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>TransferTransaction<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nuls.io/transaction'</span>

<span class="token keyword">new</span> <span class="token class-name">TransferTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>fromAddress<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>address<span class="token punctuation">,</span> <span class="token function">nulsToNa</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>         <span class="token comment">// Send 100 NULS to &quot;address&quot; account</span>
  <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>otherAddress<span class="token punctuation">,</span> <span class="token function">nulsToNa</span><span class="token punctuation">(</span><span class="token number">0.005</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// Send 0.005 NULS to &quot;otherAddress&quot; account</span>
  <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>anotherOne<span class="token punctuation">,</span> <span class="token number">100000000</span><span class="token punctuation">)</span>          <span class="token comment">// Send 1 NULS to &quot;anotherOne&quot; account</span>
  <span class="token operator">...</span>
</code></pre></div><h2 id="nuls-and-na-s"><a href="#nuls-and-na-s" class="header-anchor">#</a> NULS and NA's</h2> <p>As we have seen previously we are using the method <code>.to(address: string, amount: number)</code> of the <code>TransferTransaction</code> class to specify de destination address that will receive the transfer, and the amount of nuls transfered.</p> <p>Homologously to other blockchains platforms which has fungible tokens like <strong>Bitcoin (satoshis)</strong> or <strong>Ethereum (weis)</strong>, we need to specify the amount of tokens to be sent as <strong>&quot;NA&quot; (NULS amount)</strong> beign:</p> <ul><li>1 NA = 1/10^8 NULS</li> <li>1 NULS = 10^8 NA</li></ul> <p>As we are used to work with <strong>NULS</strong> and fractions of it instead of <strong>NA</strong>, to ease this swapping <strong>NULS SDK</strong> provides some helper functions to do the conversion of the amount to the corresponding precission.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>nulsToNa<span class="token punctuation">,</span> naToNuls<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nuls.io/core'</span>

<span class="token function">nulsToNa</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>        <span class="token comment">// 0.5 NULS -&gt; 50000000 NA</span>
<span class="token function">nulsToNa</span><span class="token punctuation">(</span><span class="token number">0.00000001</span><span class="token punctuation">)</span> <span class="token comment">// 0.00000001 NULS -&gt; 1 NA</span>

<span class="token function">naToNuls</span><span class="token punctuation">(</span><span class="token number">70000000</span><span class="token punctuation">)</span>   <span class="token comment">// 70000000 NA -&gt; 70 NULS</span>
<span class="token function">naToNuls</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>          <span class="token comment">// 1 NA -&gt; 0.00000001 NULS</span>
</code></pre></div><h2 id="transaction-remark"><a href="#transaction-remark" class="header-anchor">#</a> Transaction remark</h2> <p>We can add a remark in all kind of transactions that will be stored along with the transaction itself. To set it up we have to use the method <code>.remark(text: string)</code> available in all different Transaction classes.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>TransferTransaction<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nuls.io/transaction'</span>

<span class="token keyword">new</span> <span class="token class-name">TransferTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>fromAddress<span class="token punctuation">)</span>
  <span class="token operator">...</span>
  <span class="token punctuation">.</span><span class="token function">remark</span><span class="token punctuation">(</span><span class="token string">'This is a custom remark that will be stored as part of my transaction'</span><span class="token punctuation">)</span>
  <span class="token operator">...</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The remark should be a plain text encoded in <code>utf-8</code></p></div> <h2 id="transaction-fee"><a href="#transaction-fee" class="header-anchor">#</a> Transaction fee</h2> <p>By default the transaction fee is calculated depending on the size of the serialized transaction in kilobytes. For each <strong>1024 bytes (1 KB)</strong>, we need to pay <strong>&quot;fee price&quot;</strong> NULS in concept of fee. Depending on the transaction type, the <strong>fee price</strong> can be more or less.</p> <p>There is a default transaction fee of <strong>100000 NA (0.001 NULS)</strong> per <strong>1 KB</strong></p> <p>So for example, a transaction of type <em>TransferTransaction</em> which size in bytes is <strong>27500</strong> (<strong>27500</strong> / <strong>1024</strong> ~= <strong>27</strong> ) will have a fee of (<strong>100000 NA</strong> * <strong>27</strong> = <strong>2700000 NA</strong>) that is exactly <strong>0.027 NULS</strong>.</p> <p>The total fee is automatically added to the amount being transfered, so we need to have enough balance in the account to pay the whole amount: <strong>transfer amount</strong> + <strong>fee</strong>.</p> <p>This is the minimum required fee to make the transaction valid, but we can customize the fee to prioritize our transaction over others when packed in a block. The miner who include this transaction in a block will earn the extra fee as rewards.</p> <p>To achieve this we can use the method <code>.fee(amount: number)</code> available in all different Transaction classes. The <em>fee amount</em> should be provided in <em>NA's</em>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>nulsToNa<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nuls.io/core'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>TransferTransaction<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nuls.io/transaction'</span>

<span class="token keyword">new</span> <span class="token class-name">TransferTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>fromAddress<span class="token punctuation">)</span>
  <span class="token operator">...</span>
  <span class="token punctuation">.</span><span class="token function">fee</span><span class="token punctuation">(</span><span class="token function">nulsToNa</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// Giving 1 NULS as an extra fixed fee</span>
  <span class="token operator">...</span>
</code></pre></div><h2 id="sign-a-transaction"><a href="#sign-a-transaction" class="header-anchor">#</a> Sign a transaction</h2> <p>Once we have our transaction configured, we need to sign it before sending it to the network. To make this we need to provide the private key of the account that owns funds being transfered.</p> <p>To sign the transaction we need to call the method <code>.sign(privateKey: string)</code> of the <code>TransferTransaction</code> class.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>TransferTransaction<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nuls.io/transaction'</span>

<span class="token keyword">new</span> <span class="token class-name">TransferTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>fromAddress<span class="token punctuation">)</span>
  <span class="token operator">...</span>
  <span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>privateKey<span class="token punctuation">)</span>
  <span class="token operator">...</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Once we have signed the transaction, we can not modify it. If we try to modify it by adding one more output for example, the signature will be cleared and we will need to call the <code>sign</code> method again.</p></div> <h2 id="broadcast-a-transaction"><a href="#broadcast-a-transaction" class="header-anchor">#</a> Broadcast a transaction</h2> <p>We can broadcast a transaction to the NULS network using the method <code>.send(config?: TransactionConfig)</code> of the <code>TransferTransaction</code> class. This will send our locally signed transaction to one of the NULS nodes using an explorer api previously configured.</p> <p>We can set up our favorite explorer api host that will handle the transaction by passing it as part of the configuration object in the constructor function of the class. Here is an example doing this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>TransferTransaction<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nuls.io/transaction'</span>

<span class="token comment">// Setting it up by passing the config as argument of .send() method</span>
<span class="token keyword">new</span> <span class="token class-name">TransferTransaction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  api<span class="token punctuation">:</span> <span class="token punctuation">{</span> url<span class="token punctuation">:</span> <span class="token string">'https://nulscan.io/api/'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>fromAddress<span class="token punctuation">)</span>
  <span class="token operator">...</span>
  <span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>privateKey<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The transaction should have been signed before broadcasting it, if not an exception will be thrown</p></div> <h3 id="transaction-sent-returned-type"><a href="#transaction-sent-returned-type" class="header-anchor">#</a> Transaction sent returned type</h3> <p>The send method returns an especial object of type <code>PromiEvent</code>, which is half <code>EventEmitter</code>, and half <code>Promise</code>. This will be resolved when the transaction receipt will be available. Additionally the following events are emitted:</p> <ul><li><code>&quot;txHash&quot;</code> Once the transaction has been sent and it is in the pending transaction pool of the network waiting to be mined. An string is emitted along with the event, containing the transaction hash that identifies this transaction in the network</li> <li><code>&quot;txReceipt&quot;</code> Once the transaction has be mined in some block. A mined transaction object is emitted along with the event</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>TransferTransaction<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nuls.io/transaction'</span>

<span class="token keyword">const</span> tx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TransferTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>fromAddress<span class="token punctuation">)</span>
  <span class="token operator">...</span>
  <span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

tx<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'txHash'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">hash</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span>
  <span class="token comment">// 0020ec3215758304ca3f055a99517236fc996dabdf02fb806e4dfb76539ee43c0752</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

tx<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'txReceipt'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">receipt</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>receipt<span class="token punctuation">.</span>hash<span class="token punctuation">)</span>
  <span class="token comment">// 0020ec3215758304ca3f055a99517236fc996dabdf02fb806e4dfb76539ee43c0752</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>receipt<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
  <span class="token comment">// 663692</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Using it as a promise</span>
tx<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">receipt</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>receipt<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
  <span class="token comment">// 2</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token comment">// Error: There was an error sending the transaction to the network</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>By default there are some validations that are done before sending the transaction. You can skip this validations forcing it to be sent by overriding the default configuration with:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>TransferTransaction<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nuls.io/transaction'</span>

<span class="token keyword">new</span> <span class="token class-name">TransferTransaction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  safeCheck<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>fromAddress<span class="token punctuation">)</span>
  <span class="token operator">...</span>
</code></pre></div></div> <h2 id="serialize-a-transaction"><a href="#serialize-a-transaction" class="header-anchor">#</a> Serialize a transaction</h2> <p>The <code>.send()</code> method of the <code>TransferTransaction</code> class already does an implicit serialization before sending the transaction, but in some cases maybe we will want to get the serialized transaction to send it directly through our local node. The Transaction api provides a method to get the serialized transaction. We just need to call it:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>TransferTransaction<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nuls.io/transaction'</span>

<span class="token keyword">const</span> txHex <span class="token operator">=</span> TransferTransaction
  <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>fromAddress<span class="token punctuation">)</span>
  <span class="token operator">...</span>
  <span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>txHex<span class="token punctuation">)</span>
<span class="token comment">// f14e2c72549d1ccb34527491559e0ab33dc98395980f2a7db335ff90f10b9cee28001c94ca4215c8501b41cae5e0be7e...</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>All the validations are already executed when serializing a transaction</p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/CCC-NULS/nulsjs/edit/master/guide/transaction/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/nulsjs/guide/account/" class="prev">Account</a></span> <span class="next"><a href="/nulsjs/guide/transaction/api.html">Transaction API</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/nulsjs/assets/js/app.a69bc0ff.js" defer></script><script src="/nulsjs/assets/js/2.ad99787b.js" defer></script><script src="/nulsjs/assets/js/9.f34e919f.js" defer></script>
  </body>
</html>
